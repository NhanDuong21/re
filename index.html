<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>X·∫£ C∆° Cu·ªëi Tu·∫ßn</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            background: #020617;
            color: #e5e7eb;
            line-height: 1.6;
        }
        /* ==== L·ªöP LOGIN M·∫¨T KH·∫®U ==== */
        
        #login-box {
            max-width: 360px;
            margin: 40px auto;
            background: rgba(15, 23, 42, 0.98);
            border-radius: 18px;
            padding: 20px 18px 22px;
            border: 1px solid rgba(148, 163, 184, 0.5);
            box-shadow: 0 18px 40px rgba(15, 23, 42, 0.9);
        }
        
        #login-box h2 {
            font-size: 1.25rem;
            margin-bottom: 8px;
            color: #f97316;
            letter-spacing: 0.03em;
        }
        
        #login-box p {
            font-size: 0.9rem;
            color: #9ca3af;
        }
        
        #login-box input[type="password"] {
            width: 100%;
            margin-top: 14px;
            padding: 8px 10px;
            border-radius: 999px;
            border: 1px solid rgba(148, 163, 184, 0.7);
            background: #020617;
            color: #e5e7eb;
            outline: none;
        }
        
        #login-box button {
            margin-top: 12px;
            width: 100%;
            padding: 8px 0;
            border-radius: 999px;
            border: none;
            cursor: pointer;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.12em;
            font-weight: 600;
            background: linear-gradient(135deg, #22c55e, #f97316);
            color: #0b1120;
            box-shadow: 0 10px 35px rgba(249, 115, 22, 0.55);
        }
        
        #login-box button:active {
            transform: translateY(1px) scale(0.99);
        }
        
        #loginError {
            margin-top: 8px;
            font-size: 0.8rem;
            color: #fca5a5;
        }
        /* ·∫®n app ch√≠nh l√∫c ƒë·∫ßu, ch·ªâ hi·ªán sau khi pass ƒë√∫ng */
        
        #app-wrapper {
            display: none;
        }
        
        .page {
            max-width: 980px;
            margin: 0 auto;
            padding: 24px 16px 40px;
        }
        
        header {
            text-align: center;
            margin-bottom: 24px;
        }
        
        h1 {
            font-size: 2.1rem;
            margin-bottom: 8px;
            color: #f97316;
            letter-spacing: 0.03em;
        }
        
        .subtitle {
            font-size: 0.95rem;
            color: #9ca3af;
        }
        
        .layout {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        
        @media (min-width: 860px) {
            .layout {
                flex-direction: row;
                align-items: flex-start;
            }
            .col {
                flex: 1;
            }
        }
        
        .card {
            background: radial-gradient(circle at top, rgba(56, 189, 248, 0.18), transparent 60%), rgba(15, 23, 42, 0.96);
            border: 1px solid rgba(148, 163, 184, 0.4);
            border-radius: 18px;
            padding: 16px 18px;
            margin-bottom: 12px;
            box-shadow: 0 18px 40px rgba(15, 23, 42, 0.9);
            backdrop-filter: blur(10px);
        }
        
        .card h2 {
            font-size: 1.1rem;
            margin-bottom: 8px;
            color: #fbbf24;
        }
        
        .tagline {
            font-size: 0.9rem;
            color: #9ca3af;
            margin-bottom: 4px;
        }
        
        ul {
            list-style: none;
            padding-left: 0;
        }
        
        li {
            margin-bottom: 4px;
            font-size: 0.95rem;
        }
        
        .dot {
            display: inline-block;
            width: 6px;
            height: 6px;
            border-radius: 999px;
            margin-right: 8px;
        }
        
        .dot-on {
            background: #22c55e;
        }
        
        .dot-off {
            background: #ef4444;
        }
        
        .section-title {
            font-weight: 600;
            margin-bottom: 4px;
            color: #facc15;
            font-size: 1rem;
        }
        
        .exercise-list {
            margin-left: 4px;
        }
        
        .exercise-list li {
            padding-left: 14px;
            position: relative;
        }
        
        .exercise-list li::before {
            content: "‚Ä¢";
            position: absolute;
            left: 0;
            color: #9ca3af;
        }
        
        .option-toggle {
            display: flex;
            gap: 8px;
            margin-bottom: 10px;
            margin-top: 6px;
        }
        
        .btn-toggle {
            flex: 1;
            padding: 6px 10px;
            font-size: 0.9rem;
            border-radius: 999px;
            border: 1px solid rgba(148, 163, 184, 0.7);
            background: transparent;
            color: #e5e7eb;
            cursor: pointer;
            transition: 0.15s ease;
        }
        
        .btn-toggle:hover {
            background: rgba(148, 163, 184, 0.1);
        }
        
        .btn-toggle.active {
            background: #f97316;
            border-color: #f97316;
            color: #111827;
            font-weight: 600;
        }
        
        .option-block {
            display: none;
        }
        
        .option-block.active {
            display: block;
        }
        
        .note {
            font-size: 0.85rem;
            color: #9ca3af;
            margin-top: 6px;
        }
        
        footer {
            margin-top: 18px;
            text-align: center;
            font-size: 0.8rem;
            color: #6b7280;
        }
        /* ==== PLAYER T·∫¨P LUY·ªÜN ==== */
        
        .player-card {
            background: radial-gradient(circle at top, rgba(249, 115, 22, 0.25), transparent 60%), rgba(15, 23, 42, 0.98);
            border-radius: 22px;
            border: 1px solid rgba(248, 250, 252, 0.18);
            padding: 18px 18px 20px;
            box-shadow: 0 24px 60px rgba(15, 23, 42, 1);
            position: sticky;
            top: 16px;
        }
        
        .player-header {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            margin-bottom: 6px;
        }
        
        .player-title {
            font-size: 1.05rem;
            font-weight: 600;
            letter-spacing: 0.03em;
            text-transform: uppercase;
            color: #ffe4b5;
        }
        
        .player-meta {
            font-size: 0.8rem;
            color: #9ca3af;
        }
        
        .timer-display {
            margin: 10px 0 12px;
            text-align: center;
        }
        
        .time-main {
            font-size: 2.8rem;
            font-weight: 700;
            letter-spacing: 0.06em;
        }
        
        .time-main.work {
            color: #22c55e;
        }
        
        .time-main.rest {
            color: #f97316;
        }
        
        .time-label {
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.16em;
            color: #9ca3af;
            margin-top: 4px;
        }
        
        .phase-pill {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            font-size: 0.8rem;
            padding: 2px 10px;
            border-radius: 999px;
            border: 1px solid rgba(148, 163, 184, 0.6);
            background: rgba(15, 23, 42, 0.9);
            margin-bottom: 6px;
        }
        
        .phase-dot {
            width: 7px;
            height: 7px;
            border-radius: 999px;
        }
        
        .phase-dot.work {
            background: #22c55e;
        }
        
        .phase-dot.rest {
            background: #f97316;
        }
        
        .current-step {
            font-size: 0.95rem;
            font-weight: 500;
        }
        
        .step-index {
            font-size: 0.8rem;
            color: #9ca3af;
        }
        
        .progress-outer {
            position: relative;
            overflow: hidden;
            border-radius: 999px;
            height: 10px;
            background: rgba(15, 23, 42, 1);
            border: 1px solid rgba(30, 64, 175, 0.9);
            margin: 8px 0 4px;
        }
        
        .progress-inner {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #22c55e, #f97316);
            transition: width 0.4s ease;
        }
        
        .progress-label {
            font-size: 0.78rem;
            display: flex;
            justify-content: space-between;
            color: #9ca3af;
        }
        
        .controls {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 8px;
            margin-top: 12px;
        }
        
        .main-btn {
            flex: 1.4;
            padding: 9px 0;
            border-radius: 999px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            font-size: 0.95rem;
            text-transform: uppercase;
            letter-spacing: 0.12em;
            background: linear-gradient(135deg, #22c55e, #f97316);
            color: #0b1120;
            box-shadow: 0 10px 35px rgba(249, 115, 22, 0.55);
            transition: transform 0.08s ease, box-shadow 0.08s ease, filter 0.08s ease;
        }
        
        .main-btn:active {
            transform: translateY(1px) scale(0.99);
            box-shadow: 0 6px 20px rgba(249, 115, 22, 0.45);
            filter: brightness(0.95);
        }
        
        .sub-btn {
            flex: 0.8;
            padding: 7px 0;
            border-radius: 999px;
            border: 1px solid rgba(148, 163, 184, 0.7);
            background: rgba(15, 23, 42, 0.9);
            color: #e5e7eb;
            cursor: pointer;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.12em;
            transition: 0.1s ease;
        }
        
        .sub-btn:active {
            transform: translateY(1px) scale(0.99);
            background: rgba(30, 64, 175, 0.8);
        }
        
        .player-note {
            font-size: 0.8rem;
            color: #9ca3af;
            margin-top: 10px;
        }
        
        .player-note strong {
            color: #e5e7eb;
        }
        
        .session-select {
            margin-top: 10px;
            font-size: 0.8rem;
            color: #9ca3af;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .session-select select {
            background: transparent;
            border-radius: 999px;
            border: 1px solid rgba(148, 163, 184, 0.7);
            color: #e5e7eb;
            padding: 4px 10px;
            font-size: 0.8rem;
            outline: none;
        }
    </style>
</head>

<body>

    <!-- L·ªöP M·∫¨T KH·∫®U -->
    <div id="login-box">
        <h2>Nh·∫≠p m·∫≠t kh·∫©u ƒë·ªÉ xem l·ªãch t·∫≠p</h2>
        <p>Ch·ªâ m√¨nh v·ªõi ƒêT coi th√¥i üòé</p>
        <input type="password" id="loginPassword" placeholder="Password..." />
        <button onclick="checkPassword()">V√†o xem</button>
        <p id="loginError"></p>
    </div>

    <!-- APP G·ªêC (b·ªçc trong app-wrapper) -->
    <div id="app-wrapper">
        <div class="page">
            <header>
                <h1>L·ªãch T·∫≠p ·ªû Ph√≤ng Tr·ªç</h1>
                <p class="subtitle">Th·ªùi l∆∞·ª£ng: 20‚Äì25 ph√∫t / bu·ªïi &nbsp;‚Ä¢&nbsp; T·∫≠p c√°ch 1 ng√†y</p>
            </header>

            <div class="layout">
                <!-- C·ªòT TR√ÅI: L·ªäCH & N·ªòI DUNG -->
                <div class="col">
                    <!-- L·ªäCH T·∫¨P H√ÄNG TU·∫¶N -->
                    <section class="card">
                        <h2>L·ªãch t·∫≠p h√†ng tu·∫ßn</h2>
                        <p class="tagline">Lu√¢n phi√™n t·∫≠p ‚Äì ngh·ªâ ƒë·ªÉ c∆° th·ªÉ h·ªìi ph·ª•c t·ªët h∆°n.</p>
                        <ul>
                            <li><span class="dot dot-on"></span><strong>Th·ª© 2</strong>: T·∫≠p</li>
                            <li><span class="dot dot-off"></span><strong>Th·ª© 3</strong>: Ngh·ªâ</li>
                            <li><span class="dot dot-on"></span><strong>Th·ª© 4</strong>: T·∫≠p</li>
                            <li><span class="dot dot-off"></span><strong>Th·ª© 5</strong>: Ngh·ªâ</li>
                            <li><span class="dot dot-on"></span><strong>Th·ª© 6</strong>: T·∫≠p</li>
                            <li><span class="dot dot-off"></span><strong>Th·ª© 7</strong>: Ngh·ªâ</li>
                            <li><span class="dot dot-on"></span><strong>Ch·ªß nh·∫≠t</strong>: T·∫≠p nh·∫π n·∫øu mu·ªën</li>
                        </ul>
                    </section>

                    <!-- N·ªòI DUNG BU·ªîI T·∫¨P -->
                    <section class="card">
                        <h2>1) Kh·ªüi ƒë·ªông ‚Äì 2 ph√∫t</h2>
                        <ul class="exercise-list">
                            <li>Xoay vai 20 v√≤ng</li>
                            <li>Xoay h√¥ng 20 v√≤ng</li>
                            <li>Nh√∫n g·ªëi 30 l·∫ßn</li>
                        </ul>
                    </section>

                    <section class="card">
                        <h2>2) Cardio nh·∫π ‚Äì 7 ph√∫t</h2>
                        <p class="tagline">Ch·ªçn 1 trong 2 option d∆∞·ªõi ƒë√¢y:</p>

                        <div class="option-toggle">
                            <button class="btn-toggle active" data-target="option-a">Option A ‚Äì Ch·∫°y &amp; nh·∫£y t·∫°i ch·ªó</button>
                            <button class="btn-toggle" data-target="option-b">Option B ‚Äì Nh·∫£y d√¢y</button>
                        </div>

                        <div id="option-a" class="option-block active">
                            <p class="section-title">Option A ‚Äì Ch·∫°y &amp; nh·∫£y t·∫°i ch·ªó</p>
                            <ul class="exercise-list">
                                <li>Ch·∫°y t·∫°i ch·ªó 1 ph√∫t ‚Üí Ngh·ªâ 20 gi√¢y</li>
                                <li>Nh·∫£y step jack 1 ph√∫t ‚Üí Ngh·ªâ 20 gi√¢y</li>
                                <li>Ch·∫°y t·∫°i ch·ªó 1 ph√∫t ‚Üí Ngh·ªâ 20 gi√¢y</li>
                                <li>Nh·∫£y nh·∫π 1 ph√∫t ‚Üí Ngh·ªâ 20 gi√¢y</li>
                                <li>ƒêi t·∫°i ch·ªó 1 ph√∫t</li>
                            </ul>
                        </div>

                        <div id="option-b" class="option-block">
                            <p class="section-title">Option B ‚Äì Nh·∫£y d√¢y</p>
                            <ul class="exercise-list">
                                <li>Nh·∫£y 30 gi√¢y / Ngh·ªâ 30 gi√¢y √ó 7 v√≤ng</li>
                            </ul>
                        </div>
                    </section>

                    <section class="card">
                        <h2>3) B·ª•ng &amp; core ‚Äì 8 ph√∫t</h2>
                        <ul class="exercise-list">
                            <li>Plank: 3 √ó 40‚Äì45 gi√¢y</li>
                            <li>Leg raise: 3 √ó 12</li>
                            <li>Crunch: 3 √ó 20</li>
                        </ul>
                    </section>

                    <section class="card">
                        <h2>4) Th√¢n d∆∞·ªõi nh·∫π ‚Äì 6 ph√∫t</h2>
                        <ul class="exercise-list">
                            <li>Squat kh√¥ng t·∫°: 3 √ó 12‚Äì15</li>
                            <li>Glute bridge: 3 √ó 15</li>
                        </ul>
                    </section>

                    <section class="card">
                        <h2>5) Gi√£n c∆° ‚Äì 2 ph√∫t</h2>
                        <ul class="exercise-list">
                            <li>G·∫≠p ng∆∞·ªùi ch·∫°m ch√¢n 30 gi√¢y</li>
                            <li>Gi√£n vai / ng·ª±c</li>
                            <li>Gi√£n l∆∞ng</li>
                        </ul>
                        <p class="note">C√≥ th·ªÉ gi√£n c∆° l√¢u h∆°n n·∫øu c√≤n th·ªùi gian ƒë·ªÉ gi·∫£m ƒëau nh·ª©c ng√†y h√¥m sau.</p>
                    </section>
                </div>

                <!-- C·ªòT PH·∫¢I: PLAYER ƒê·∫æM GI·ªú -->
                <div class="col">
                    <section class="player-card">
                        <div class="player-header">
                            <div>
                                <div class="player-title">Workout Timer</div>
                                <div class="player-meta" id="sessionInfo">Full bu·ªïi t·∫≠p ‚Äì Option A</div>
                            </div>
                            <div class="step-index" id="stepIndex">B∆∞·ªõc 1 / 1</div>
                        </div>

                        <div class="phase-pill">
                            <span class="phase-dot work" id="phaseDot"></span>
                            <span id="phaseText">ƒêang t·∫≠p</span>
                        </div>

                        <div class="timer-display">
                            <div id="timeMain" class="time-main work">00:00</div>
                            <div class="time-label" id="timeLabel">B·∫Øt ƒë·∫ßu khi b·∫•m Start</div>
                        </div>

                        <div class="current-step" id="currentStepText">Kh·ªüi ƒë·ªông ‚Äì Xoay kh·ªõp to√†n th√¢n</div>

                        <div class="progress-outer">
                            <div class="progress-inner" id="progressInner"></div>
                        </div>
                        <div class="progress-label">
                            <span id="elapsedText">0:00</span>
                            <span id="remainingText">0:00</span>
                        </div>

                        <div class="controls">
                            <button class="sub-btn" id="prevBtn">Prev</button>
                            <button class="main-btn" id="startPauseBtn">Start</button>
                            <button class="sub-btn" id="nextBtn">Next</button>
                        </div>

                        <div class="controls" style="margin-top: 6px;">
                            <button class="sub-btn" id="resetBtn">Reset</button>
                        </div>

                        <p class="player-note">
                            ‚Ä¢ M·ªói khi h·∫øt 1 b∆∞·ªõc, timer t·ª± nh·∫£y sang b∆∞·ªõc ti·∫øp theo.<br /> ‚Ä¢ ƒêi·ªán tho·∫°i s·∫Ω <strong>rung nh·∫π</strong> khi chuy·ªÉn b∆∞·ªõc (n·∫øu tr√¨nh duy·ªát cho ph√©p).
                        </p>

                        <div class="session-select">
                            Ch·ªçn bu·ªïi:
                            <select id="sessionSelect">
                                <option value="fullA">Full bu·ªïi ‚Äì Cardio Option A</option>
                                <option value="warmup">Ch·ªâ kh·ªüi ƒë·ªông</option>
                                <option value="cardioA">Ch·ªâ Cardio Option A</option>
                                <option value="cardioB">Cardio ‚Äì Nh·∫£y d√¢y</option>
                                <option value="core">Ch·ªâ b·ª•ng &amp; core</option>
                            </select>
                        </div>
                    </section>
                </div>
            </div>

            <footer>
                L·ªãch t·∫≠p c√° nh√¢n ‚Äì l∆∞u tr√™n GitHub cho d·ªÖ xem üí™
            </footer>
        </div>
    </div>

    <!-- SCRIPT M·∫¨T KH·∫®U -->
    <script>
        const APP_PASSWORD = "1122334455"; // üîê ƒê·ªîI PASS ·ªû ƒê√ÇY
        const PASS_KEY = "workout_auth";

        function showApp() {
            const loginBox = document.getElementById("login-box");
            const appWrapper = document.getElementById("app-wrapper");
            if (loginBox) loginBox.style.display = "none";
            if (appWrapper) appWrapper.style.display = "block";
        }

        function checkPassword() {
            const input = document.getElementById("loginPassword");
            const error = document.getElementById("loginError");
            if (!input) return;

            if (input.value === APP_PASSWORD) {
                try {
                    localStorage.setItem(PASS_KEY, "ok"); // nh·ªõ l·∫ßn sau kh·ªèi nh·∫≠p l·∫°i
                } catch (e) {}
                showApp();
            } else {
                if (error) error.textContent = "Sai m·∫≠t kh·∫©u r·ªìi üòÖ";
            }
        }

        window.addEventListener("load", () => {
            try {
                if (localStorage.getItem(PASS_KEY) === "ok") {
                    showApp();
                }
            } catch (e) {
                // n·∫øu localStorage l·ªói v·∫´n cho login b√¨nh th∆∞·ªùng
            }
        });
    </script>

    <!-- SCRIPT G·ªêC C·ª¶A APP (GI·ªÆ NGUY√äN) -->
    <script>
        // ==== DATA C√ÅC BU·ªîI T·∫¨P ====

        function planWarmup() {
            return [{
                label: "Kh·ªüi ƒë·ªông ‚Äì Xoay kh·ªõp to√†n th√¢n",
                seconds: 120,
                type: "work"
            }];
        }

        function planCardioA() {
            return [{
                label: "Ch·∫°y t·∫°i ch·ªó",
                seconds: 60,
                type: "work"
            }, {
                label: "Ngh·ªâ",
                seconds: 20,
                type: "rest"
            }, {
                label: "Step jack",
                seconds: 60,
                type: "work"
            }, {
                label: "Ngh·ªâ",
                seconds: 20,
                type: "rest"
            }, {
                label: "Ch·∫°y t·∫°i ch·ªó l·∫ßn 2",
                seconds: 60,
                type: "work"
            }, {
                label: "Ngh·ªâ",
                seconds: 20,
                type: "rest"
            }, {
                label: "Nh·∫£y nh·∫π",
                seconds: 60,
                type: "work"
            }, {
                label: "Ngh·ªâ",
                seconds: 20,
                type: "rest"
            }, {
                label: "ƒêi t·∫°i ch·ªó h·ªìi ph·ª•c",
                seconds: 60,
                type: "work"
            }];
        }

        function planCardioB() {
            // 7 v√≤ng: 30s nh·∫£y / 30s ngh·ªâ
            const arr = [];
            for (let i = 1; i <= 7; i++) {
                arr.push({
                    label: "Nh·∫£y d√¢y ‚Äì v√≤ng " + i,
                    seconds: 30,
                    type: "work"
                });
                if (i !== 7) {
                    arr.push({
                        label: "Ngh·ªâ ‚Äì sau v√≤ng " + i,
                        seconds: 30,
                        type: "rest"
                    });
                }
            }
            return arr;
        }

        function planCore() {
            return [{
                label: "Plank set 1",
                seconds: 40,
                type: "work"
            }, {
                label: "Ngh·ªâ",
                seconds: 20,
                type: "rest"
            }, {
                label: "Plank set 2",
                seconds: 40,
                type: "work"
            }, {
                label: "Ngh·ªâ",
                seconds: 20,
                type: "rest"
            }, {
                label: "Plank set 3",
                seconds: 45,
                type: "work"
            }, {
                label: "Leg raise (∆∞·ªõc l∆∞·ª£ng)",
                seconds: 60,
                type: "work"
            }, {
                label: "Ngh·ªâ ng·∫Øn",
                seconds: 20,
                type: "rest"
            }, {
                label: "Crunch (∆∞·ªõc l∆∞·ª£ng)",
                seconds: 60,
                type: "work"
            }];
        }

        function planFullA() {
            return [
                ...planWarmup(),
                ...planCardioA(),
                ...planCore()
            ];
        }

        // ==== PLAYBACK STATE ====

        let currentPlanKey = "fullA";
        let currentPlan = planFullA();
        let currentIndex = 0;
        let remaining = currentPlan[0].seconds;
        let elapsedTotal = 0;
        let totalSeconds = currentPlan.reduce((sum, step) => sum + step.seconds, 0);
        let timerId = null;
        let isRunning = false;

        // ==== DOM ====
        const timeMainEl = document.getElementById("timeMain");
        const timeLabelEl = document.getElementById("timeLabel");
        const currentStepTextEl = document.getElementById("currentStepText");
        const progressInnerEl = document.getElementById("progressInner");
        const elapsedTextEl = document.getElementById("elapsedText");
        const remainingTextEl = document.getElementById("remainingText");
        const startPauseBtn = document.getElementById("startPauseBtn");
        const prevBtn = document.getElementById("prevBtn");
        const nextBtn = document.getElementById("nextBtn");
        const resetBtn = document.getElementById("resetBtn");
        const phaseDotEl = document.getElementById("phaseDot");
        const phaseTextEl = document.getElementById("phaseText");
        const stepIndexEl = document.getElementById("stepIndex");
        const sessionSelectEl = document.getElementById("sessionSelect");
        const sessionInfoEl = document.getElementById("sessionInfo");

        function formatTime(sec) {
            const m = Math.floor(sec / 60);
            const s = sec % 60;
            return m + ":" + String(s).padStart(2, "0");
        }

        function vibrate() {
            if (navigator.vibrate) {
                navigator.vibrate(180);
            }
        }

        function loadPlan(key) {
            currentPlanKey = key;
            if (key === "fullA") {
                currentPlan = planFullA();
                sessionInfoEl.textContent = "Full bu·ªïi t·∫≠p ‚Äì Option A";
            } else if (key === "warmup") {
                currentPlan = planWarmup();
                sessionInfoEl.textContent = "Ch·ªâ kh·ªüi ƒë·ªông";
            } else if (key === "cardioA") {
                currentPlan = planCardioA();
                sessionInfoEl.textContent = "Cardio ‚Äì Option A (ch·∫°y & nh·∫£y)";
            } else if (key === "cardioB") {
                currentPlan = planCardioB();
                sessionInfoEl.textContent = "Cardio ‚Äì Nh·∫£y d√¢y";
            } else if (key === "core") {
                currentPlan = planCore();
                sessionInfoEl.textContent = "B·ª•ng & core";
            }
            totalSeconds = currentPlan.reduce((sum, step) => sum + step.seconds, 0);
            currentIndex = 0;
            remaining = currentPlan[0].seconds;
            elapsedTotal = 0;
            stopTimer();
            isRunning = false;
            startPauseBtn.textContent = "Start";
            updateUI();
        }

        function updateUI() {
            const step = currentPlan[currentIndex];
            const type = step.type || "work";

            timeMainEl.textContent = formatTime(remaining);
            timeMainEl.classList.toggle("work", type === "work");
            timeMainEl.classList.toggle("rest", type === "rest");
            currentStepTextEl.textContent = step.label;

            phaseDotEl.classList.toggle("work", type === "work");
            phaseDotEl.classList.toggle("rest", type === "rest");
            phaseTextEl.textContent = type === "work" ? "ƒêang t·∫≠p" : "ƒêang ngh·ªâ";

            if (!isRunning) {
                timeLabelEl.textContent = "B·∫•m Start ƒë·ªÉ b·∫Øt ƒë·∫ßu";
            } else {
                timeLabelEl.textContent = "ƒêang ch·∫°y ‚Äì c·ªë l√™n!";
            }

            const progress = totalSeconds === 0 ? 0 : (elapsedTotal / totalSeconds) * 100;
            progressInnerEl.style.width = progress.toFixed(2) + "%";

            elapsedTextEl.textContent = formatTime(elapsedTotal);
            const remainingSession = Math.max(totalSeconds - elapsedTotal, 0);
            remainingTextEl.textContent = "-" + formatTime(remainingSession);

            stepIndexEl.textContent = "B∆∞·ªõc " + (currentIndex + 1) + " / " + currentPlan.length;
        }

        function tick() {
            if (!isRunning) return;
            if (remaining > 0) {
                remaining -= 1;
                elapsedTotal += 1;
                updateUI();
            } else {
                // H·∫øt b∆∞·ªõc hi·ªán t·∫°i -> chuy·ªÉn b∆∞·ªõc ti·∫øp theo
                vibrate();
                if (currentIndex < currentPlan.length - 1) {
                    currentIndex += 1;
                    remaining = currentPlan[currentIndex].seconds;
                    updateUI();
                } else {
                    // H·∫øt bu·ªïi t·∫≠p
                    stopTimer();
                    isRunning = false;
                    startPauseBtn.textContent = "Start";
                    timeLabelEl.textContent = "Xong bu·ªïi t·∫≠p! Nice ‚úÖ";
                    vibrate();
                }
            }
        }

        function startTimer() {
            if (timerId) return;
            timerId = setInterval(tick, 1000);
        }

        function stopTimer() {
            if (timerId) {
                clearInterval(timerId);
                timerId = null;
            }
        }

        // ==== BUTTON EVENTS ====

        startPauseBtn.addEventListener("click", () => {
            if (!isRunning) {
                isRunning = true;
                startPauseBtn.textContent = "Pause";
                timeLabelEl.textContent = "ƒêang ch·∫°y ‚Äì c·ªë l√™n!";
                startTimer();
            } else {
                isRunning = false;
                startPauseBtn.textContent = "Resume";
                timeLabelEl.textContent = "ƒêang t·∫°m d·ª´ng";
                stopTimer();
            }
        });

        resetBtn.addEventListener("click", () => {
            stopTimer();
            isRunning = false;
            startPauseBtn.textContent = "Start";
            currentIndex = 0;
            remaining = currentPlan[0].seconds;
            elapsedTotal = 0;
            timeLabelEl.textContent = "Reset v·ªÅ b∆∞·ªõc ƒë·∫ßu";
            updateUI();
        });

        nextBtn.addEventListener("click", () => {
            if (currentIndex < currentPlan.length - 1) {
                currentIndex += 1;
                remaining = currentPlan[currentIndex].seconds;
                updateUI();
            }
        });

        prevBtn.addEventListener("click", () => {
            if (currentIndex > 0) {
                currentIndex -= 1;
                remaining = currentPlan[currentIndex].seconds;
                updateUI();
            }
        });

        sessionSelectEl.addEventListener("change", (e) => {
            loadPlan(e.target.value);
        });

        // ==== TOGGLE OPTION CARDIO (CH·ªà HI·ªÇN TH·ªä VƒÇN B·∫¢N, KO LI√äN QUAN TIMER) ====
        const toggleBtns = document.querySelectorAll(".btn-toggle[data-target]");
        const optionBlocks = document.querySelectorAll(".option-block");

        toggleBtns.forEach((btn) => {
            btn.addEventListener("click", () => {
                const targetId = btn.getAttribute("data-target");

                toggleBtns.forEach((b) => b.classList.remove("active"));
                btn.classList.add("active");

                optionBlocks.forEach((block) => {
                    block.classList.remove("active");
                    if (block.id === targetId) {
                        block.classList.add("active");
                    }
                });
            });
        });

        // Kh·ªüi t·∫°o giao di·ªán ban ƒë·∫ßu
        loadPlan("fullA");
    </script>
</body>

</html>